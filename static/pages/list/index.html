<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSSCounterStyleRule ãƒ‡ãƒ¢ (ãƒãƒ¼ã‚«ãƒ¼å·¦æƒãˆèª¿æ•´)</title>
    <style>
        /* åŸºæœ¬çš„ãªã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚° */
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f4f4f9;
            color: #333;
            margin: 0;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .container {
            background-color: #ffffff;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-radius: 8px;
            padding: 1.5rem;
            width: 100%;
            max-width: 900px;
            margin-top: 1rem;
        }

        header {
            margin-bottom: 1.5rem;
            text-align: center;
        }

        header h1 {
            font-size: 2rem;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 0.5rem;
        }

        header p {
            font-size: 0.9rem;
            color: #555;
        }

        hr {
            border: none;
            border-top: 1px solid #e0e0e0;
            margin: 2rem 0;
        }

        h2 {
            font-size: 1.5rem;
            font-weight: 600;
            color: #34495e;
            margin-bottom: 1rem;
        }

        h3 {
            font-size: 1.1rem;
            font-weight: 600;
            color: #7f8c8d;
            margin-bottom: 0.5rem;
        }

        /* ã‚«ã‚¹ã‚¿ãƒ ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚¹ã‚¿ã‚¤ãƒ«ã®å®šç¾© */
        @counter-style circled-alpha {
            system: cyclic;
            /* symbolså†…ã®å¯å¤‰ã‚¹ãƒšãƒ¼ã‚¹ã‚’å‰Šé™¤ã—ã€ã‚·ãƒ³ãƒœãƒ«ã®é•·ã•ã‚’çµ±ä¸€ */
            symbols: 'â’¶\3000' 'â’·\3000\3000' 'â’¸\3000\3000\3000' 'â’¹\3000\3000\3000\3000' 'â’º\3000\3000\3000\3000\3000';
            /* suffixã§ãƒãƒ¼ã‚«ãƒ¼å¾Œã®åŒºåˆ‡ã‚Šæ–‡å­—ã¨ã‚¹ãƒšãƒ¼ã‚¹ã‚’ä¸€è²«ã—ã¦æŒ‡å®š */
            suffix: ". ";
        }

        @counter-style japanese-formal {
            system: additive;
            additive-symbols: 10 'æ‹¾', 9 'ä¹', 8 'æŒ', 7 'æ¼†', 6 'é™¸', 5 'ä¼', 4 'è‚†', 3 'å‚', 2 'å¼', 1 'å£±';
            suffix: " ä¹‹å·»";
            fallback: cjk-decimal;
            range: 1 99;
        }
       @counter-style abc {
           system: additive;
           additive-symbols: 1 "  "; /* ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã®å€¤ã®æ•°ã ã‘â—ã‚’ç¹°ã‚Šè¿”ã™ */
           suffix: " ";
       }

        @counter-style emoji-steps {
            system: fixed;
            symbols: 'ğŸ‘£' 'ğŸ‘Ÿ' 'ğŸ‘ ' 'ğŸ¥¾' 'ğŸ‘¢';
            /* suffixãŒãªã„å ´åˆã€ãƒãƒ¼ã‚«ãƒ¼ã®ç›´å¾Œã«ãƒ†ã‚­ã‚¹ãƒˆãŒç¶šãã¾ã™ */
            /* å¿…è¦ã§ã‚ã‚Œã° suffix: " "; ãªã©ã‚’è¿½åŠ  */
        }

        @counter-style empty-example {
            /* ä½•ã‚‚è¨˜è¿°å­ã‚’æŒ‡å®šã—ãªã„ */
        }

        /* ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£è¡¨ç¤ºç”¨ãƒ†ãƒ¼ãƒ–ãƒ«ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .property-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 0.5rem;
        }
        .property-table th, .property-table td {
            border: 1px solid #ddd;
            padding: 0.75rem;
            text-align: left;
            font-size: 0.9rem;
            word-break: break-all; /* é•·ã„æ–‡å­—åˆ—ãŒãƒ†ãƒ¼ãƒ–ãƒ«ã‚»ãƒ«ã‚’å£Šã•ãªã„ã‚ˆã†ã« */
        }
        .property-table th {
            background-color: #f9f9f9;
            font-weight: 600;
        }

        /* å‡ºåŠ›ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        #output {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 1.5rem;
        }

        .rule-card {
            background-color: #fdfdfd;
            padding: 1.5rem;
            border-radius: 6px;
            box-shadow: 0 1px 4px rgba(0,0,0,0.07);
        }
        .rule-card h2 {
            font-size: 1.25rem;
            color: #007bff;
            margin-bottom: 1rem;
        }

        /* ãƒªã‚¹ãƒˆã®ã‚¹ã‚¿ã‚¤ãƒ« */
        ol, ul {
            margin-left: 0; /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒãƒ¼ã‚¸ãƒ³ã‚’ãƒªã‚»ãƒƒãƒˆ */
            padding-left: 0px; /* 3em;ãƒãƒ¼ã‚«ãƒ¼ã¨ãƒ†ã‚­ã‚¹ãƒˆã®ãŸã‚ã®ååˆ†ãªãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã‚’ç¢ºä¿ (emå˜ä½ã§ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã«é€£å‹•) */
                               /* list-style-position: outside; (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ) ã®å ´åˆã€ã“ã®ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã®å†…å´ã«ãƒ†ã‚­ã‚¹ãƒˆãŒã€å¤–å´ã«ãƒãƒ¼ã‚«ãƒ¼ãŒé…ç½®ã•ã‚Œã‚‹ã‚¤ãƒ¡ãƒ¼ã‚¸ */
            list-style-position: inside; /*outside;  ãƒãƒ¼ã‚«ãƒ¼ã‚’ãƒ†ã‚­ã‚¹ãƒˆãƒ–ãƒ­ãƒƒã‚¯ã®å¤–å´ã«é…ç½® */
            margin-bottom: 1rem;
            display: inline-grid;
        }
        li {
            margin-bottom: 0.3rem;
            white-space: pre;
            /* text-indent: -1.5em;  ã‚‚ã—ãƒãƒ¼ã‚«ãƒ¼ãŒpaddingã®å†…å´ã«æ¥ã‚‹å ´åˆ(inside)ã®èª¿æ•´ä¾‹ã€‚ä»Šå›ã¯outsideãªã®ã§ä¸è¦ */
        }


        /* ã‚°ãƒªãƒƒãƒ‰ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ */
        .grid-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .list-example-item {
            background-color: #f9f9f9;
            padding: 1rem;
            border-radius: 6px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }

        /* ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .offset-control {
            margin-bottom: 0.75rem;
        }
        .offset-control label {
            margin-right: 0.5rem;
            font-size: 0.9rem;
        }
        .offset-control input[type="number"] {
            padding: 0.3rem 0.5rem;
            border: 1px solid #ccc;
            border-radius: 4px;
            width: 60px;
        }
        .set-counter-value {
          /* olè¦ç´ ãŒä½¿ç”¨ã™ã‚‹ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ 'list-item' ã®å€¤ã‚’6ã«è¨­å®šã—ã¾ã™ã€‚ */
          /* ã“ã‚Œã«ã‚ˆã‚Šã€ã“ã®ãƒªã‚¹ãƒˆé …ç›®ã®ãƒãƒ¼ã‚«ãƒ¼ã¯ã€é©ç”¨ã•ã‚Œã¦ã„ã‚‹list-style-type (ã“ã®å ´åˆã¯ circled-alpha) ã®6ç•ªç›®ã®è¡¨ç¾ã«ãªã‚Šã¾ã™ã€‚ */
          /* counter-increment ã¯é€šå¸¸é€šã‚Šè¡Œã‚ã‚Œã‚‹ãŸã‚ã€ã“ã®é …ç›®è‡ªä½“ã‚‚ã‚«ã‚¦ãƒ³ãƒˆã‚¢ãƒƒãƒ—ã®å¯¾è±¡ã§ã™ãŒã€counter-set ãŒãã®å€¤ã‚’ä¸Šæ›¸ãã—ã¾ã™ã€‚ */
          counter-set: list-item var(--counter-value);
        }
        :root{
            --counter-pushed :0;
        }
        .push-counter-value {
            display:contents;
              /* olè¦ç´ ãŒä½¿ç”¨ã™ã‚‹ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ 'list-item' ã®å€¤ã‚’6ã«è¨­å®šã—ã¾ã™ã€‚ */
              /* ã“ã‚Œã«ã‚ˆã‚Šã€ã“ã®ãƒªã‚¹ãƒˆé …ç›®ã®ãƒãƒ¼ã‚«ãƒ¼ã¯ã€é©ç”¨ã•ã‚Œã¦ã„ã‚‹list-style-type (ã“ã®å ´åˆã¯ circled-alpha) ã®6ç•ªç›®ã®è¡¨ç¾ã«ãªã‚Šã¾ã™ã€‚ */
              /* counter-increment ã¯é€šå¸¸é€šã‚Šè¡Œã‚ã‚Œã‚‹ãŸã‚ã€ã“ã®é …ç›®è‡ªä½“ã‚‚ã‚«ã‚¦ãƒ³ãƒˆã‚¢ãƒƒãƒ—ã®å¯¾è±¡ã§ã™ãŒã€counter-set ãŒãã®å€¤ã‚’ä¸Šæ›¸ãã—ã¾ã™ã€‚ */
              --counter-pushed: calc( var(--counter-push) + 1 );
        }
        .pop-counter-value {
          /* olè¦ç´ ãŒä½¿ç”¨ã™ã‚‹ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ 'list-item' ã®å€¤ã‚’6ã«è¨­å®šã—ã¾ã™ã€‚ */
          /* ã“ã‚Œã«ã‚ˆã‚Šã€ã“ã®ãƒªã‚¹ãƒˆé …ç›®ã®ãƒãƒ¼ã‚«ãƒ¼ã¯ã€é©ç”¨ã•ã‚Œã¦ã„ã‚‹list-style-type (ã“ã®å ´åˆã¯ circled-alpha) ã®6ç•ªç›®ã®è¡¨ç¾ã«ãªã‚Šã¾ã™ã€‚ */
          /* counter-increment ã¯é€šå¸¸é€šã‚Šè¡Œã‚ã‚Œã‚‹ãŸã‚ã€ã“ã®é …ç›®è‡ªä½“ã‚‚ã‚«ã‚¦ãƒ³ãƒˆã‚¢ãƒƒãƒ—ã®å¯¾è±¡ã§ã™ãŒã€counter-set ãŒãã®å€¤ã‚’ä¸Šæ›¸ãã—ã¾ã™ã€‚ */
        
          counter-set: list-item  var(--counter-pushed);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>&#x274C; CSS&#x3000 CounterStyleRule ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãƒ‡ãƒ¢</h1>
            <p>
                <code>@counter-style</code> ãƒ«ãƒ¼ãƒ«ã§å®šç¾©ã•ã‚ŒãŸæ§˜ã€…ãªè¨˜è¿°å­ãŒã€JavaScriptã® <code>CSSCounterStyleRule</code> ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã©ã®ã‚ˆã†ã«è¡¨ç¾ã•ã‚Œã‚‹ã‹ã‚’ç¤ºã—ã¾ã™ã€‚
                åŸºæœ¬çš„ãªCSSã§ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°ã—ã€ãƒªã‚¹ãƒˆã®é–‹å§‹ç•ªå·å¤‰æ›´æ©Ÿèƒ½ã€ãƒãƒ¼ã‚«ãƒ¼ã®å·¦æƒãˆèª¿æ•´ã‚’è¡Œã„ã¾ã—ãŸã€‚
            </p>
        </header>

        <div id="output"> </div>

        <hr>

        <h2>ã‚«ã‚¹ã‚¿ãƒ ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã®ä½¿ç”¨ä¾‹:</h2>
        <div class="grid-container">
            <div class="list-example-item">
                <h3><code>circled-alpha</code> ã‚¹ã‚¿ã‚¤ãƒ«</h3>
                <div class="offset-control">
                    <label for="offset-circled-alpha">é–‹å§‹ç•ªå·:</label>
                    <input type="number" id="offset-circled-alpha" value="1" min="1">
                </div>
                <ol id="list-circled-alpha" style="list-style-type: circled-alpha;list-style-position: inside;">
                    <li>æœ€åˆã®é …ç›®</li>
                    <li>äºŒç•ªç›®ã®é …ç›®</li>
                    <li>ä¸‰ç•ªç›®ã®é …ç›®</li>
                    <li>å››ç•ªç›®ã®é …ç›®</li>
                    <li>äº”ç•ªç›®ã®é …ç›®</li>
                </ol>
            </div>
            <div class="list-example-item">
                <h3><code>japanese-formal</code> ã‚¹ã‚¿ã‚¤ãƒ«</h3>
                <div class="offset-control">
                    <label for="offset-japanese-formal">é–‹å§‹ç•ªå·:</label>
                    <input type="number" id="offset-japanese-formal" value="1" min="1" max="99">
                </div>
                <ol id="list-japanese-formal" style="list-style-type: japanese-formal;">
                    <li>æœ€åˆã®å·»
                         <ol style="list-style-type: japanese-formal;" start="5"> <li>å‰¯é …ç›®</li>
                            <li>å‰¯é …ç›®</li>
                        </ol>
                    </li>
                    <li>äºŒç•ªç›®ã®å·»</li>
                    <li>åç•ªç›®ã®å·»</li>
                </ol>
            </div>
             <div class="list-example-item">
                <h3><code>custom-padded-negative</code> ã‚¹ã‚¿ã‚¤ãƒ« (ãƒªã‚¹ãƒˆã§ã®ä½¿ç”¨ä¾‹)</h3>
                 <div class="offset-control">
                    <label for="offset-custom-padded">é–‹å§‹ç•ªå·:</label>
                    <input type="number" id="offset-custom-padded" value="1" min="0">
                </div>
                <ol id="list-custom-padded" style="list-style-type: abc;">
                    <li>é …ç›®1</li>
                    <li>é …ç›®Push</li>
                    <li class="set-counter-value"  style="--counter-value: 6;">é …ç›®Set6</li>
                    <li>é …ç›®Next</li>
                    <li>é …ç›®Next</li>
                    <li class="set-counter-value"  style="--counter-value: 3;">é …ç›®Pop</li>
                    <li>é …ç›®Next</li>
                    <li>é …ç›®Next</li>
                </ol>
            </div>
            <div class="list-example-item">
                <h3><code>emoji-steps</code> ã‚¹ã‚¿ã‚¤ãƒ«</h3>
                <div class="offset-control">
                    <label for="offset-emoji-steps">é–‹å§‹ç•ªå·:</label>
                    <input type="number" id="offset-emoji-steps" value="1" min="1">
                </div>
                <ol id="list-emoji-steps" style="list-style-type: emoji-steps;">
                    <li>ã‚¹ãƒ†ãƒƒãƒ—1</li>
                    <li>ã‚¹ãƒ†ãƒƒãƒ—2</li>
                    <li>ã‚¹ãƒ†ãƒƒãƒ—3</li>
                    <li>ã‚¹ãƒ†ãƒƒãƒ—4</li>
                    <li>ã‚¹ãƒ†ãƒƒãƒ—5</li>
                    <li>ã‚¹ãƒ†ãƒƒãƒ—6 (ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã¾ãŸã¯ç¹°ã‚Šè¿”ã—)</li>
                </ol>
            </div>
        </div>
    </div>

    <script>
        // DOMãŒå®Œå…¨ã«èª­ã¿è¾¼ã¾ã‚ŒãŸå¾Œã«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œ
        document.addEventListener('DOMContentLoaded', function () {
            const outputDiv = document.getElementById('output');
            if (!outputDiv) {
                console.error('Output div not found!');
                return;
            }

            // ã‚¹ã‚¿ã‚¤ãƒ«ã‚·ãƒ¼ãƒˆã‚’èµ°æŸ»ã—ã¦ @counter-style ãƒ«ãƒ¼ãƒ«ã‚’è¦‹ã¤ã‘ã‚‹
            for (const sheet of document.styleSheets) {
                try {
                    for (const rule of sheet.cssRules) {
                        if (rule instanceof CSSCounterStyleRule) {
                            displayCounterStyleRuleProperties(rule, outputDiv);
                        }
                    }
                } catch (e) {
                    // console.warn('Cannot access stylesheet: ', sheet.href, e);
                }
            }

            // ãƒªã‚¹ãƒˆã‚ªãƒ•ã‚»ãƒƒãƒˆã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã®è¨­å®š
            setupOffsetControl('offset-circled-alpha', 'list-circled-alpha');
            setupOffsetControl('offset-japanese-formal', 'list-japanese-formal');
            setupOffsetControl('offset-custom-padded', 'list-custom-padded');
            setupOffsetControl('offset-emoji-steps', 'list-emoji-steps');
        });

        // CSSCounterStyleRule ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’è¡¨ç¤ºã™ã‚‹é–¢æ•°
        function displayCounterStyleRuleProperties(rule, container) {
            const ruleCard = document.createElement('div');
            ruleCard.className = 'rule-card';

            const title = document.createElement('h2');
            title.textContent = `ãƒ«ãƒ¼ãƒ«å: "${rule.name}"`;
            ruleCard.appendChild(title);

            const table = document.createElement('table');
            table.className = 'property-table';
            const tbody = document.createElement('tbody');

            const properties = [
                { name: 'name', desc: 'ãƒ«ãƒ¼ãƒ«ã®åå‰ (<custom-ident>)' },
                { name: 'system', desc: 'system è¨˜è¿°å­' },
                { name: 'symbols', desc: 'symbols è¨˜è¿°å­' },
                { name: 'additiveSymbols', desc: 'additive-symbols è¨˜è¿°å­' },
                { name: 'negative', desc: 'negative è¨˜è¿°å­' },
                { name: 'prefix', desc: 'prefix è¨˜è¿°å­' },
                { name: 'suffix', desc: 'suffix è¨˜è¿°å­' },
                { name: 'range', desc: 'range è¨˜è¿°å­' },
                { name: 'pad', desc: 'pad è¨˜è¿°å­' },
                { name: 'speakAs', desc: 'speak-as è¨˜è¿°å­' },
                { name: 'fallback', desc: 'fallback è¨˜è¿°å­' }
            ];

            properties.forEach(propInfo => {
                const row = tbody.insertRow();
                const cell1 = row.insertCell();
                cell1.textContent = propInfo.name;

                const cell2 = row.insertCell();
                const value = rule[propInfo.name];
                cell2.textContent = value === '' ? '(ç©ºæ–‡å­—åˆ—)' : value;
            });

            table.appendChild(tbody);
            ruleCard.appendChild(table);
            container.appendChild(ruleCard);
        }

        // ãƒªã‚¹ãƒˆã®é–‹å§‹ç•ªå·ã‚’å¤‰æ›´ã™ã‚‹ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã‚’è¨­å®šã™ã‚‹é–¢æ•°
        function setupOffsetControl(inputId, listId) {
            const inputElement = document.getElementById(inputId);
            const listElement = document.getElementById(listId);

            if (inputElement && listElement) {
                inputElement.addEventListener('input', function() {
                    const newStartValue = parseInt(this.value, 10);
                    if (!isNaN(newStartValue)) {
                        listElement.setAttribute('start', newStartValue);
                    }
                });
                const initialValue = parseInt(inputElement.value, 10);
                 if (!isNaN(initialValue)) {
                    listElement.setAttribute('start', initialValue);
                }
            }
        }
    </script>
</body>
</html>
